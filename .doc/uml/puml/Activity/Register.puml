@startuml 注册流程
title 注册流程

start

:用户请求注册页面;
:用户输入用户名、密码、昵称;
:用户选择角色 (学生/教师);

if (输入格式验证?) then (无效)
    :显示错误信息\n(长度或字符类型不符);
    stop
else (有效)
endif

if (角色是教师?) then (是)
    :用户输入邀请码;
    :后端验证邀请码;
    if (邀请码有效?) then (否)
        :显示错误信息\n(邀请码无效或已使用);
        stop
    else (是)
        :标记邀请码为已使用;
    endif
else (否 (学生))
    :无需邀请码;
endif

:后端验证用户名是否已存在;
if (用户名已存在?) then (是)
    :显示错误信息\n(用户名已被占用);
    stop
else (否)
    :创建新用户记录;
    :返回注册成功信息;
    :跳转至登录页面;
endif

stop
@enduml
