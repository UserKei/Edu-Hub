@startuml 创建发布课程流程
title 创建与发布课程流程

start

:教师点击"创建新课程";
:输入课程基本信息\n(标题, 简介, 封面);

repeat
    :添加章节;
    if (需要子章节?) then (是)
        :创建子章节 (最多3级);
    else (否)
    endif
    :上传章节内容\n(视频, 文档, 图文);
repeat while (还有更多章节?) is (是)

:选择操作;

if (操作类型) then (保存草稿)
    :设置状态为 DRAFT;
    :保存到数据库;
    :提示保存成功;
else (立即发布)
    if (完整性检查?) then (不通过)
        :提示错误\n(缺少必要信息或章节);
        :返回编辑页面;
        stop
    else (通过)
        :设置状态为 PUBLISHED;
        :保存到数据库;
        :提示发布成功;
    endif
endif

stop
@enduml
